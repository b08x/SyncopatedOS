<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
    <!-- pandoc template based on mdBook theme -->
    <meta charset="utf-8" />
    <meta name="generator" content="pandoc" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
    <meta name="author" content="Something" />
    <meta name="dcterms.date" content="2024-03-22" />
    <title>SyncopatedIaC</title>

    <link rel="shortcut icon" href="template/favicon.ico">
    <link rel="stylesheet" href="template/screen.css" />
    <link rel="stylesheet" href="template/print.css" media="print">
    <style>
        code{white-space: pre-wrap;}
        span.smallcaps{font-variant: small-caps;}
        span.underline{text-decoration: underline;}
        div.column{display: inline-block; vertical-align: top; width: 50%;}
    </style>
    <style>
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
    </style>

    <!-- Fonts -->
    <link rel="stylesheet" href="template/fontawesome/css/all.min.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">
</head>
<body class="light">


    <!-- Provide site root to javascript -->
    <script type="text/javascript">
        var path_to_root = "";
        var default_theme = "light";
    </script>

    <!-- Work around some values being stored in localStorage wrapped in quotes -->
    <script type="text/javascript">
        try {
            var theme = localStorage.getItem('mdbook-theme');
            var sidebar = localStorage.getItem('mdbook-sidebar');

            if (theme.startsWith('"') && theme.endsWith('"')) {
                localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
            }

            if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
            }
        } catch (e) { }
    </script>

    <!-- Set the theme before any content is loaded, prevents flash -->
    <script type="text/javascript">
        var theme;
        try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
        if (theme === null || theme === undefined) { theme = default_theme; }
        document.body.className = theme;
        document.querySelector('html').className = theme + ' js';
    </script>

    <!-- Hide / unhide sidebar before it is displayed -->
    <script type="text/javascript">
        var html = document.querySelector('html');
        var sidebar = 'hidden';
        if (document.body.clientWidth >= 1080) {
            try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
            sidebar = sidebar || 'visible';
        }
        html.classList.remove('sidebar-visible');
        html.classList.add("sidebar-" + sidebar);
    </script>

    <nav id="sidebar" class="sidebar" aria-label="Table of contents">
        <div class="toc">
            <ul>
            <li><a href="#introduction" id="toc-introduction"><span
            class="toc-section-number">1</span> Introduction</a>
            <ul>
            <li><a href="#project-overview"
            id="toc-project-overview"><span
            class="toc-section-number">1.1</span> Project
            Overview</a></li>
            </ul></li>
            <li><a href="#the-variables-and-where-to-set-them"
            id="toc-the-variables-and-where-to-set-them"><span
            class="toc-section-number">2</span> The Variables and Where
            To Set Them</a>
            <ul>
            <li><a href="#group-variables"
            id="toc-group-variables"><span
            class="toc-section-number">2.1</span> Group
            Variables</a></li>
            <li><a href="#host-variables" id="toc-host-variables"><span
            class="toc-section-number">2.2</span> Host
            Variables</a></li>
            <li><a href="#vars" id="toc-vars"><span
            class="toc-section-number">2.3</span> Vars</a></li>
            </ul></li>
            <li><a href="#roles" id="toc-roles"><span
            class="toc-section-number">3</span> roles</a></li>
            <li><a href="#environment-profile"
            id="toc-environment-profile"><span
            class="toc-section-number">4</span> Environment Profile</a>
            <ul>
            <li><a href="#global-envrionment"
            id="toc-global-envrionment"><span
            class="toc-section-number">4.1</span> global
            envrionment</a></li>
            <li><a href="#bash" id="toc-bash"><span
            class="toc-section-number">4.2</span> bash</a></li>
            <li><a href="#base" id="toc-base"><span
            class="toc-section-number">4.3</span> base</a></li>
            <li><a href="#desktop" id="toc-desktop"><span
            class="toc-section-number">4.4</span> desktop</a></li>
            <li><a href="#i3" id="toc-i3"><span
            class="toc-section-number">4.5</span> i3</a></li>
            <li><a href="#terminal" id="toc-terminal"><span
            class="toc-section-number">4.6</span> terminal</a></li>
            <li><a href="#theme" id="toc-theme"><span
            class="toc-section-number">4.7</span> theme</a></li>
            <li><a href="#xorg" id="toc-xorg"><span
            class="toc-section-number">4.8</span> xorg</a></li>
            <li><a href="#zsh" id="toc-zsh"><span
            class="toc-section-number">4.9</span> zsh</a></li>
            </ul></li>
            <li><a href="#managing-dots-file-with-yadm"
            id="toc-managing-dots-file-with-yadm"><span
            class="toc-section-number">5</span> managing dots file with
            yadm</a></li>
            <li><a
            href="#how-to-offload-plugin-processing-to-a-reaper-dsp-server"
            id="toc-how-to-offload-plugin-processing-to-a-reaper-dsp-server"><span
            class="toc-section-number">6</span> How to Offload Plugin
            Processing to a reaper DSP server</a></li>
            <li><a href="#ambisonics--spatial-audio"
            id="toc-ambisonics--spatial-audio"><span
            class="toc-section-number">7</span> Ambisonics &amp; Spatial
            Audio</a></li>
            <li><a href="#installing-things"
            id="toc-installing-things"><span
            class="toc-section-number">8</span> Installing
            things</a></li>
            <li><a href="#something-something-configuration"
            id="toc-something-something-configuration"><span
            class="toc-section-number">9</span> something something
            configuration</a></li>
            <li><a href="#an-example-use-case"
            id="toc-an-example-use-case"><span
            class="toc-section-number">10</span> an example use case</a>
            <ul>
            <li><a href="#query" id="toc-query"><span
            class="toc-section-number">10.1</span> query</a></li>
            <li><a href="#response" id="toc-response"><span
            class="toc-section-number">10.2</span> response</a></li>
            <li><a href="#query-1" id="toc-query-1"><span
            class="toc-section-number">10.3</span> query</a></li>
            <li><a href="#response-1" id="toc-response-1"><span
            class="toc-section-number">10.4</span> response</a></li>
            </ul></li>
            <li><a href="#keybindings" id="toc-keybindings"><span
            class="toc-section-number">11</span> keybindings</a></li>
            <li><a href="#diagrams" id="toc-diagrams"><span
            class="toc-section-number">12</span> diagrams</a></li>
            <li><a href="#roles-1" id="toc-roles-1"><span
            class="toc-section-number">13</span> roles</a>
            <ul>
            <li><a href="#the-base-role" id="toc-the-base-role"><span
            class="toc-section-number">13.1</span> the base
            role</a></li>
            <li><a href="#i3-1" id="toc-i3-1"><span
            class="toc-section-number">13.2</span> i3</a></li>
            </ul></li>
            <li><a href="#applications" id="toc-applications"><span
            class="toc-section-number">14</span> Applications</a></li>
            </ul>
        </div>
    </nav>

    <div id="page-wrapper" class="page-wrapper">

        <div class="page">

            <div id="menu-bar" class="menu-bar">
                <div id="menu-bar-sticky-container">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fas fa-bars"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">SyncopatedIaC</h1>

                    <div class="right-buttons">
                        <a onclick="window.print()" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fas fa-print"></i>
                        </a>
                        <a href="SyncopatedIaC.pdf" title="View PDF file" aria-label="View PDF file">
                            <i class="fas fa-file-pdf"></i>
                        </a>
                        </div>
                </div>
            </div>


            <div id="content" class="content">
                <main>
<h1 data-number="1" id="introduction"><span
class="header-section-number">1</span> Introduction</h1>
<p>::: columns</p>
<p>::::: column</p>
<p><img src="images/workstation.jpeg"
alt="The Creative Commons Attribution-ShareAlike logo" /></p>
<p>Linux Audio....It's like pulling teeth out of a baby.</p>
<p>"Linux" is a popular operating system for those who enjoy living a
life of challenge. But it can be difficult to manage desktop
configurations on a large scale. There are a number of configuration
management issues that need to be addressed in order to make Linux a
more sustainable platform for studio workstations.</p>
<p>One of the biggest challenges is the lack of standardization. There
are many different distributions of Linux, and each one has its own set
of configuration options. This can make it difficult to pool efforts and
build on a common foundation.</p>
<p>:::::</p>
<p>::::: column Here - is - another totally objective statement from a
completely real person:</p>
<p>  Ansible can be implemented to overcome configuration management
challenges. It can automate patch management, configuration file
management, user management, and task automation. This helps ensure
systems are up-to-date, have consistent configurations, and reduce
manual errors. Overall, Ansible improves efficiency, reduces errors, and
enhances security.</p>
<p>a server in a render farm essentially has to be able to run all of
the same applications and plugins as the desktop machine, just headless,
and partly because the workstations need also be able to participate in
the render farm.</p>
<p>An exercise in Linux Desktop Configuration Management. Intended to
serve as an IaC framework for a small lab or studio.</p>
<p>The project contains customized Ansible roles, playbooks, and modules
to help optimize the configuration Linux hosts that are used in an audio
production workflow.</p>
<p>:::::</p>
<p>:::</p>
<h2 data-number="1.1" id="project-overview"><span
class="header-section-number">1.1</span> Project Overview</h2>
<p>The "SyncopatedIac" project is an Infrastructure as Code (IaC)
framework that</p>
<p>You can create playbooks that define the desired settings for each
application, such as audio preferences, plugin configurations, or
project templates. By using Ansible, you can easily apply these
configurations across multiple machines, ensuring consistency and
reducing manual effort.</p>
<p>Many audio production workflows rely on various plugins for effects,
virtual instruments, or signal processing. Ansible Collections can
assist in managing these plugins by automating their installation,
updates, and configurations. You can define the desired set of plugins
for each machine or project and use Ansible to ensure they are
consistently available across your studio environment.</p>
<p>Audio production software often has specific dependencies or
requirements. Ansible Collections can help manage these dependencies by
automating the installation of required libraries or packages. This
ensures that all necessary dependencies met on each machine, avoiding
compatibility issues or missing components.</p>
<p>Ansible Collections can provide modules and playbooks to automate the
configuration of audio interfaces, sound cards, MIDI controllers, and
other hardware devices. You can define the desired settings for each
device and use Ansible to ensure consistent configurations across your
studio machines.</p>
<p>If you have a networked audio setup with multiple machines
collaborating on projects, Ansible Collections can help you automate the
configuration of network settings, synchronization protocols, and audio
streaming setups. You can create collections that include roles and
playbooks specific to your networked audio requirements.</p>
<p>The initial design focuses on the i3 window manager, renowned for its
efficiency and keyboard-driven operation. While existing roles support
alternative environments like GNOME or XFCE, future enhancements are
anticipated to extend comprehensive support to these desktops.</p>
<p>The setup playbook gets you started with a minimal yet functional
desktop environment (like i3), essential utilities, and development
tools. Freely expand and tailor it to your unique requirements.</p>
<h1 data-number="2" id="the-variables-and-where-to-set-them"><span
class="header-section-number">2</span> The Variables and Where To Set
Them</h1>
<h2 data-number="2.1" id="group-variables"><span
class="header-section-number">2.1</span> Group Variables</h2>
<ul>
<li><code>all.yml</code>: Variables applied to all hosts</li>
<li><code>server.yml</code>: Variables applied to hosts in the server
group</li>
<li><code>workstation.yml</code>: Variables applied to hosts in
workstation group</li>
</ul>
<p>Here's a breakdown of where a variable declared in
<code>group_vars/workstation.yml</code> could be overwritten, listed in
order of increasing precedence:</p>
<ol type="1">
<li><p>Group Variables (More Specific): group_vars/*: Variables defined
in group_vars files for groups that take precedence over the
"workstation" group. Consider how your inventory is structured and any
nested group relationships.</p></li>
<li><p><strong>Inventory host_vars/*:</strong></p></li>
</ol>
<ul>
<li>Variables defined in a <code>host_vars</code> file for a specific
host in the 'workstation' group would take precedence.</li>
</ul>
<ol start="3" type="1">
<li><p><strong>Playbook Variables:</strong></p>
<ul>
<li><strong>Play vars:</strong> Variables defined in your playbook's
<code>vars</code> section.</li>
<li><strong>Play vars_prompt:</strong> Variables requested from the user
at runtime using the <code>vars_prompt</code> section.</li>
<li><strong>Play vars_files:</strong> Variables loaded from external
files using the <code>vars_files</code> section.</li>
</ul></li>
<li><p><strong>Blocks and Tasks:</strong></p>
<ul>
<li><strong>Block vars:</strong> Variables defined within a
<code>block</code> in your playbook (only affecting tasks within that
block).</li>
<li><strong>Task vars:</strong> Variables defined directly inside a
task.</li>
</ul></li>
<li><p><strong>Include Variables:</strong></p>
<ul>
<li><strong>include_vars:</strong> Variables loaded from external files
using the <code>include_vars</code> module.</li>
</ul></li>
<li><p><strong>Facts and Registered Variables:</strong></p>
<ul>
<li><strong>host facts / cached set_facts:</strong> Discovered host
facts or facts manually set using the <code>set_fact</code> module with
the same name as one of your <code>group_vars/workstation.yml</code>
variables would override it.</li>
<li><strong>register:</strong> The <code>register</code> module captures
output from a task and stores it as a variable. If this matches the name
of a variable from <code>group_vars/workstation.yml</code>, the
registered value takes precedence.</li>
</ul></li>
<li><p><strong>Extra Variables (command line):</strong></p>
<ul>
<li>Variables passed at runtime using the <code>-e</code> flag when
executing the Ansible playbook have the absolute highest
precedence.</li>
</ul></li>
</ol>
<p><strong>Key Points:</strong></p>
<ul>
<li><strong>Group Scope:</strong> Variables in
<code>group_vars/workstation.yml</code> apply to all hosts within the
"workstation" group.</li>
<li><strong>Host Specificity:</strong> Host variables always override
group variables for individual hosts.</li>
</ul>
<p><strong>Let me know if you want to dive into a specific example or
explore scenarios with more complex group hierarchies!</strong></p>
<p><strong>How It Fits Together</strong></p>
<ol type="1">
<li><strong>A role defines its basic structure:</strong> Variables set
in <code>defaults/main.yml</code> and <code>vars/main.yml</code>.</li>
<li><strong>Your inventory applies these roles:</strong> Hosts are
placed in groups with <code>group_vars</code> possibly setting variables
including those that might be defined in the roles.</li>
<li><strong>Playbooks customize further:</strong> Your Ansible playbooks
can introduce variables that take precedence for specific tasks or
blocks.</li>
</ol>
<p><strong>Key Summary:</strong></p>
<ul>
<li><strong>Layered System:</strong> Think of Ansible's variable
precedence as layers, with each layer having the potential to override
the layers below it.</li>
<li><strong>Context Matters:</strong> The most appropriate place to
define a variable depends on the scope and how much flexibility you need
for overriding it in different playbooks and inventories.</li>
</ul>
<p><strong>Example:</strong></p>
<ul>
<li><strong>Role 'webserver' default for port:</strong>
<code>defaults/main.yml</code>: <code>webserver_port: 80</code></li>
<li><strong>Change port generally for workstations:</strong>
<code>group_vars/workstation.yml</code>:
<code>webserver_port: 8080</code></li>
<li><strong>Override for a specific server:</strong>
<code>host_vars/specialserver.yml</code>:
<code>webserver_port: 8443</code></li>
</ul>
<h2 data-number="2.2" id="host-variables"><span
class="header-section-number">2.2</span> Host Variables</h2>
<ul>
<li>Individual host-specific variables</li>
</ul>
<h2 data-number="2.3" id="vars"><span
class="header-section-number">2.3</span> Vars</h2>
<ul>
<li><code>vars/{{ distro }}/packages.yml</code>: Package lists</li>
<li><code>var/stheme.yml</code>: Theme variables</li>
</ul>
<h1 data-number="3" id="roles"><span
class="header-section-number">3</span> roles</h1>
<h3 data-number="3.0.1" id="role-variables"><span
class="header-section-number">3.0.1</span> Role Variables</h3>
<ul>
<li><strong>Medium Precedence:</strong> Variables declared in a role's
<code>vars/main.yml</code> file override role defaults. However, they
are still subject to being overridden by:
<ul>
<li>Group variables from a more specific group the host is a part
of</li>
<li>Host variables</li>
<li>Playbook variables</li>
<li>....</li>
</ul></li>
</ul>
<p>If you declare a variable in your <code>vars/main.yml</code> file for
a role, here's the breakdown of where it could be overwritten, listed in
order of increasing precedence:</p>
<ol start="2" type="1">
<li><p><strong>Inventory Variables:</strong></p>
<ul>
<li><strong>Group vars:</strong> Variables within
<code>group_vars</code> directories that correspond to groups your host
is a member of.</li>
<li><strong>Host vars:</strong> Variables within a
<code>host_vars</code> file specifically for the host the role is
applied to.</li>
</ul></li>
<li><p><strong>Playbook Variables:</strong></p>
<ul>
<li><strong>Play vars:</strong> Variables defined within your playbook
using the <code>vars</code> section.</li>
<li><strong>Play vars_prompt:</strong> Variables requested at runtime
from the user using the <code>vars_prompt</code> section.</li>
<li><strong>Play vars_files:</strong> Variables loaded from external
files using the <code>vars_files</code> section.</li>
</ul></li>
<li><p><strong>Block and Task Variables:</strong></p>
<ul>
<li><strong>Block vars:</strong> Variables defined within a
<code>block</code> in your playbook, but only within the scope of that
block.</li>
<li><strong>Task vars:</strong> Variables defined directly inside a
task.</li>
</ul></li>
<li><p><strong>Include Variables:</strong></p>
<ul>
<li><strong>include_vars:</strong> Variables loaded from files you
import using the <code>include_vars</code> module.</li>
</ul></li>
<li><p><strong>Facts and Registered Variables:</strong></p>
<ul>
<li><strong>host facts / cached set_facts:</strong> A discovered host
fact or a manually set fact using the <code>set_fact</code> module with
the same name as one of your variables would override it.</li>
<li><strong>register:</strong> The <code>register</code> module captures
the output of a task and stores it as a variable. If the variable name
matches one of your <code>vars/main.yml</code> variables, this value
would take precedence.</li>
</ul></li>
<li><p><strong>Extra Variables (command line):</strong></p>
<ul>
<li>Variables passed from the command-line using the <code>-e</code>
flag when executing the Ansible playbook have the absolute highest
precedence.</li>
</ul></li>
</ol>
<p><strong>Key Points</strong></p>
<ul>
<li>Variables in <code>vars/main.yml</code> act as a more specific
configuration layer than defaults but still fall within the role's
boundaries.</li>
<li>Ansible's precedence rules ensure you can flexibly override
variables as needed in your playbooks or inventories.</li>
</ul>
<p><strong>Let me know if you'd like a specific example of how to
override a variable declared in <code>vars/main.yml</code>!</strong></p>
<h3 data-number="3.0.2" id="role-defaults"><span
class="header-section-number">3.0.2</span> Role Defaults</h3>
<p>If you have a variable declared in <code>defaults/main.yml</code>
(within a role), here's where it could be overwritten, in order of
increasing precedence:</p>
<ul>
<li><strong>Lowest Precedence:</strong> Role defaults are the
foundation, providing the baseline values for variables within a role.
Anything we've discussed above will override role defaults.</li>
</ul>
<ol type="1">
<li><p><strong>Role Variables (Other Locations):</strong></p>
<ul>
<li><strong>vars/main.yml:</strong> Variables in your role's
<code>vars/main.yml</code> file would override defaults.</li>
<li><strong>Other role-specific vars files:</strong> Variables in other
<code>vars</code> files created for the same role would take
precedence.</li>
</ul></li>
<li><p><strong>Inventory Variables:</strong></p>
<ul>
<li><strong>Inventory group_vars/*:</strong> Variables in
<code>group_vars</code> directories that correspond to groups your host
is a member of.</li>
<li><strong>Inventory host_vars/*:</strong> Variables in a
<code>host_vars</code> file specifically for the host the role is
applied to.</li>
</ul></li>
<li><p><strong>Playbook Variables:</strong></p>
<ul>
<li><strong>Play vars:</strong> Variables defined within your playbook's
<code>vars</code> section.</li>
<li><strong>Play vars_prompt:</strong> Variables requested from the user
at runtime using the <code>vars_prompt</code> section.</li>
<li><strong>Play vars_files:</strong> Variables loaded from external
files using the <code>vars_files</code> section.</li>
</ul></li>
<li><p><strong>Blocks and Tasks:</strong></p>
<ul>
<li><strong>Block vars:</strong> Variables defined within a
<code>block</code> in your playbook, but only within the scope of that
block.</li>
<li><strong>Task vars:</strong> Variables defined directly inside a
task.</li>
</ul></li>
<li><p><strong>Include Variables:</strong></p>
<ul>
<li><strong>include_vars:</strong> Variables loaded from external files
using the <code>include_vars</code> module.</li>
</ul></li>
<li><p><strong>Facts and Registered Variables:</strong></p>
<ul>
<li><strong>host facts / cached set_facts:</strong> A discovered host
fact or a manually set fact using the <code>set_fact</code> module with
the same name as your default would override it.</li>
<li><strong>register:</strong> The <code>register</code> module captures
the output of a task and stores it as a variable. If the variable name
matches one of your defaults, this value would take precedence.</li>
</ul></li>
<li><p><strong>Extra Variables (command line):</strong></p>
<ul>
<li>Variables passed at runtime using the <code>-e</code> flag when
executing the Ansible playbook have the absolute highest
precedence.</li>
</ul></li>
</ol>
<p><strong>Key Points</strong></p>
<ul>
<li>Role defaults act as the lowest-priority "base" for variable
settings.</li>
<li>Ansible's precedence rules provide granular control and flexibility
within a structured framework.</li>
</ul>
<h3 data-number="3.0.3" id="defaultsmainyml"><span
class="header-section-number">3.0.3</span> defaults/main.yml</h3>
<ul>
<li>Role defaults are automatically loaded by Ansible, serving as the
default configuration for the role.</li>
<li>If a variable is not defined elsewhere in the playbook, Ansible will
use the value specified in the role defaults.</li>
</ul>
<h3 data-number="3.0.4" id="varsmainyml"><span
class="header-section-number">3.0.4</span> vars/main.yml</h3>
<ul>
<li>These variables are meant to be set by the user or in the playbook
to customize the behavior of the role.</li>
<li>Role variables take precedence over role defaults. If a variable is
defined in both role defaults and role variables, the value from role
variables will be used.</li>
</ul>
<ul>
<li>you can put user vars in <code>group_vars</code> or
<code>$ANSIBLE_HOME/vars/users.yml</code></li>
</ul>
<h1 data-number="4" id="environment-profile"><span
class="header-section-number">4</span> Environment Profile</h1>
<h2 data-number="4.1" id="global-envrionment"><span
class="header-section-number">4.1</span> global envrionment</h2>
<ul>
<li><code>/etc/profile</code> initializes variables for login
shells <em>only</em>.</li>
</ul>
<p>Templates that comprise a user profile are used in several roles.</p>
<h2 data-number="4.2" id="bash"><span
class="header-section-number">4.2</span> <a
href="roles/bash/README.md">bash</a></h2>
<div class="sourceCode" id="cb1"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> .bash_logout</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="ex">└──</span> .bashrc</span></code></pre></div>
<h2 data-number="4.3" id="base"><span
class="header-section-number">4.3</span> <a
href="roles/base/README.md">base</a></h2>
<div class="sourceCode" id="cb2"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot"> base</span><span class="co">](roles/base/templates/home)</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>├── .aliases.j2</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>├── .config</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>│   └── environment.d</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>│       └── cachyos.conf.j2</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>└── .profile.j2</span></code></pre></div>
<h2 data-number="4.4" id="desktop"><span
class="header-section-number">4.4</span> <a
href="roles/desktop/README.md">desktop</a></h2>
<pre><code>roles/desktop/templates/home
└── .config
    ├── dunst
    │   └── dunstrc.j2
    ├── picom
    │   └── picom.conf.j2
    ├── rofi
    │   ├── colors
    │   │   ├── adapta.rasi.j2
    │   │   ├── arc.rasi.j2
    │   │   ├── black.rasi.j2
    │   │   ├── catppuccin.rasi.j2
    │   │   ├── cyberpunk.rasi.j2
    │   │   ├── dracula.rasi.j2
    │   │   ├── everforest.rasi.j2
    │   │   ├── gruvbox.rasi.j2
    │   │   ├── lovelace.rasi.j2
    │   │   ├── navy.rasi.j2
    │   │   ├── nord.rasi.j2
    │   │   ├── onedark.rasi.j2
    │   │   ├── paper.rasi.j2
    │   │   ├── solarized.rasi.j2
    │   │   ├── tokyonight.rasi.j2
    │   │   └── yousai.rasi.j2
    │   ├── config.rasi.j2
    │   ├── file-browser
    │   ├── gruvbox-common.rasi.j2
    │   ├── gruvbox-dark-hard.rasi.j2
    │   ├── launchers
    │   │   ├── type-1
    │   │   │   ├── shared
    │   │   │   │   ├── colors.rasi.j2
    │   │   │   │   └── fonts.rasi.j2
    │   │   │   ├── style-10.rasi.j2
    │   │   │   └── style-8.rasi.j2
    │   │   └── type-4
    │   │       ├── launcher.sh.j2
    │   │       ├── shared
    │   │       │   ├── colors.rasi.j2
    │   │       │   └── fonts.rasi.j2
    │   │       └── style-6.rasi.j2
    │   └── scripts
    │       ├── launcher_main.sh.j2
    │       ├── launcher_t1.sh.j2
    │       └── launcher_t4.sh.j2
    ├── swhkd
    │   └── swhkdrc.j2
    └── sxhkd
        └── sxhkdrc.j2</code></pre>
<h2 data-number="4.5" id="i3"><span
class="header-section-number">4.5</span> <a
href="roles/i3/README.md">i3</a></h2>
<pre><code>roles/i3/templates/home
└── .config
    ├── dunst
    │   └── dunstrc.j2
    ├── i3
    │   ├── appearance.j2
    │   ├── autostart.j2
    │   ├── config.j2
    │   ├── keybindings.j2
    │   ├── modes
    │   │   └── resize.j2
    │   ├── window_assignments.j2
    │   └── window_behavior.j2
    ├── i3status-rust
    │   ├── config.toml.j2
    │   └── themes
    │       └── syncopated.toml.j2
    └── picom
        └── picom.conf.j2</code></pre>
<h2 data-number="4.6" id="terminal"><span
class="header-section-number">4.6</span> <a
href="roles/terminal/README.md">terminal</a></h2>
<pre><code>roles/terminal/templates/home
└── .config
    ├── alacritty
    │   └── alacritty.yml.j2
    ├── htop
    │   └── htoprc.j2
    ├── kitty
    │   ├── cpu.conf.j2
    │   ├── current-theme.conf.j2
    │   ├── kitty.conf.j2
    │   ├── open-actions.conf.j2
    │   └── start.conf.j2
    └── lnav
        └── checklog.lnav.j2</code></pre>
<h2 data-number="4.7" id="theme"><span
class="header-section-number">4.7</span> <a
href="roles/theme/README.md">theme</a></h2>
<pre><code>roles/theme/templates/home
├── .config
│   ├── gtk-3.0
│   │   ├── bookmarks.j2
│   │   ├── gtk.css.j2
│   │   └── settings.ini.j2
│   ├── gtk-4.0
│   │   └── settings.ini.j2
│   ├── Kvantum
│   │   └── kvantum.kvconfig.j2
│   ├── qt5ct
│   │   ├── colors
│   │   │   └── syncopated.conf.j2
│   │   └── qt5ct.conf.j2
│   └── qt6ct
│       ├── colors
│       │   └── syncopated.conf.j2
│       └── qt6ct.conf.j2
└── .gtkrc-2.0.j2</code></pre>
<h2 data-number="4.8" id="xorg"><span
class="header-section-number">4.8</span> <a
href="roles/xorg/README.md">xorg</a></h2>
<pre><code>roles/xorg/templates/home
├── .xinitrc.j2
├── .xprofile.j2
├── .Xresources.j2
└── .xserverrc.j2</code></pre>
<h2 data-number="4.9" id="zsh"><span
class="header-section-number">4.9</span> <a
href="roles/zsh/README.md">zsh</a></h2>
<pre><code>roles/zsh/templates/home
├── .zprofile.j2
├── .zshenv.j2
└── .zshrc.j2</code></pre>
<h1 data-number="5" id="managing-dots-file-with-yadm"><span
class="header-section-number">5</span> managing dots file with yadm</h1>
<h1 data-number="6"
id="how-to-offload-plugin-processing-to-a-reaper-dsp-server"><span
class="header-section-number">6</span> How to Offload Plugin Processing
to a reaper DSP server</h1>
<div class="sourceCode" id="cb9"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">+------------------+</span>                     +------------+</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span>                  <span class="kw">|</span>                     <span class="kw">|</span>            <span class="kw">|</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span>  <span class="ex">workstation-01</span>  <span class="kw">|</span>                     <span class="kw">|</span><span class="ex">reaperDSP-01</span><span class="kw">|</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span>                  <span class="kw">|</span>                     <span class="kw">|</span>            <span class="kw">|</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span>                  <span class="ex">+--------------------</span><span class="op">&gt;|</span>            <span class="kw">|</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span>                  <span class="kw">|</span>                     <span class="kw">|</span>            <span class="kw">|</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span>                  <span class="kw">|</span>                     <span class="kw">|</span>            <span class="kw">|</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span>                  <span class="kw">|</span>                     <span class="kw">|</span>            <span class="kw">|</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span>                  <span class="kw">|</span><span class="op">&lt;</span>--------------------+            <span class="kw">|</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span>                  <span class="kw">|</span>                     <span class="ex">+------------+</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span>                  <span class="kw">|</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="ex">+------------------+</span></span></code></pre></div>
<p>designate a host in your environment, run the playbook
<code>reaperDSP.yml</code> which configures the host device with a
minimal profile to run reaper, jack and compatible plugins</p>
<h3 data-number="6.0.1" id="system-specs"><span
class="header-section-number">6.0.1</span> system specs</h3>
<pre class="shell"><code>
# reaperDSP-01

The system is a custom desktop running ArchLabs Linux with a 64-bit architecture and a Zen kernel version 6.6.9-zen1-1-zen. It features an Intel 12th Gen Core i9-12900HK processor with 14 cores and 20 threads. The desktop environment is i3, and the system uses startx as the display manager.

The CPU operates with a base/boost speed of 4257/8500 MHz, and it utilizes Intel P-State scaling with a powersave governor. The graphics are handled by Intel Iris Xe Graphics with active ports including DP-2.

The system has multiple network interfaces, including Intel Alder Lake-P PCH CNVi WiFi, Intel Ethernet I225-V, and Realtek RTL8111/8168/8411 PCI Express Gigabit Ethernet. Bluetooth functionality is provided by an Intel AX211 Bluetooth module.

The primary audio device is the Intel Alder Lake PCH-P High Definition Audio, managed by the `snd_hda_intel` kernel driver. It operates on bus 00:1f.3 with chip-ID 8086:51c8. The system utilizes ALSA (Advanced Linux Sound Architecture) with kernel version 6.6.9-zen1-1-zen.

Additionally, the system has two audio servers running concurrently:

1. JACK (version 1.9.22) is active and managed by the root user and processes. It is used in conjunction with a2jmidid, which is also active. JACK provides tools like jack_control and jack_mixer.
    
2. PulseAudio (version 16.1) is also active and managed by the root user and processes. It is configured with various modules, including pulseaudio-alsa and pulseaudio-jack. Tools associated with PulseAudio include pacat, pactl, pamixer, pavucontrol, and pulsemixer.
</code></pre>
<pre class="shell"><code>
# workstation-01

The system is a Lenovo ThinkPad X1 Yoga 3rd convertible system running Arch Linux with a 6.6.9-arch1-1 kernel. It features an Intel Core i7-8650U processor with four cores and eight threads, clocked between 400 and 4200 MHz. The system has 16 GB of RAM and a 953.87 GB Samsung SSD.

For graphics, it utilizes Intel UHD Graphics 620, supporting a 2560x2520 resolution on a Dell U2718Q monitor and a 1920x1080 resolution on an AU Optronics display.

The CPU operates at a base/boost speed of 1900/2100 MHz, with a governor set to powersave. The overall system utilizes advanced technologies like AVX, AVX2, and others, with various vulnerability mitigations in place.

Audio is managed by Intel Sunrise Point-LP HD Audio, and additional audio devices include the Lenovo ThinkPad Thunderbolt 3 Dock Audio and Dictaphone PowerMicII-NS. The system uses ALSA for audio, and there are two audio servers, JACK and PulseAudio, running concurrently.
</code></pre>
<p>For comparison, a proprietary solution that</p>
<h1 data-number="7" id="ambisonics--spatial-audio"><span
class="header-section-number">7</span> Ambisonics &amp; Spatial
Audio</h1>
<h1 data-number="8" id="installing-things"><span
class="header-section-number">8</span> Installing things</h1>
<p>It's what we live for.</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># simply just defining the variable will install the thing</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co"># it will call the task list</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co"># if desired more variables can defined within the tasks</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co"># f.e:</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="co"># vscode:</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="co">#   packages:</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="co">#     example_package: 1.0</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="fu">vscode</span><span class="kw">:</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="fu">pulsar</span><span class="kw">:</span></span></code></pre></div>
<div class="sourceCode" id="cb13"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">import_tasks</span><span class="kw">:</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">file</span><span class="kw">:</span><span class="at"> dev/pulsar.yml</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">when</span><span class="kw">:</span><span class="at"> pulsar is defined</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">tags</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="st">&#39;pulsar&#39;</span><span class="kw">]</span></span></code></pre></div>
<h1 data-number="9" id="something-something-configuration"><span
class="header-section-number">9</span> something something
configuration</h1>
<div class="sourceCode" id="cb14"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">hosts</span><span class="kw">:</span><span class="at"> localhost</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">become</span><span class="kw">:</span><span class="at"> </span><span class="ch">True</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">gather_subset</span><span class="kw">:</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> hardware</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> network</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">vars</span><span class="kw">:</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">desktop</span><span class="kw">:</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">wm</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;i3&#39;</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">shell</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;zsh&#39;</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">dm</span><span class="kw">:</span><span class="at"> greetd</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">terminal</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;terminator&#39;</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">audio</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;jack&#39;</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">ruby_version</span><span class="kw">:</span><span class="at"> </span><span class="fl">3.0.0</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">python_version</span><span class="kw">:</span><span class="at"> </span><span class="fl">3.11.1</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">cleanup</span><span class="kw">:</span><span class="at"> </span><span class="ch">True</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">PKG_CONFIG_PATH</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;/usr/share/pkgconfig:/usr/lib/pkgconfig:/usr/local/lib/pkgconfig&quot;</span></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">ZSH</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;/usr/share/oh-my-zsh&quot;</span></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">DISPLAY</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;:0&quot;</span></span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a><span class="fu">pre_tasks</span><span class="kw">:</span></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a><span class="fu">roles</span><span class="kw">:</span></span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">role</span><span class="kw">:</span><span class="at"> desktop</span></span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">tags</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="st">&#39;desktop&#39;</span><span class="kw">]</span></span></code></pre></div>
<hr />
<p>layout: note title: an example use-case tags:</p>
<ul>
<li>ansible</li>
<li>linux-audio</li>
</ul>
<hr />
<h1 data-number="10" id="an-example-use-case"><span
class="header-section-number">10</span> an example use case</h1>
<p>An operation is <em><strong>idempotent</strong></em> if doing it once
gives you the same end result as doing it over and over again, without
anything else changing in between.</p>
<p><strong>Infrastructure as code</strong> (<strong>IaC</strong>) is the
process of managing and provisioning computer resources through
machine-readable definition files, rather than physical hardware
configuration or interactive configuration tools.</p>
<p>There are generally two approaches to IaC: declarative (functional)
vs. imperative) (procedural).</p>
<p>The difference between the declarative and the imperative approach is
essentially <em>'what'</em> versus <em>'how'</em>. </p>
<p>The declarative approach focuses on what the eventual target
configuration should be; the imperative focuses on how the
infrastructure is to be changed to meet this</p>
<p>The declarative approach defines the desired state and the system
executes what needs to happen to achieve that desired state. Imperative
defines specific commands that need to be executed in the appropriate
order to end with the desired conclusion</p>
<p>There are two methods of IaC: push and pull.</p>
<p>The main difference is the manner in which the servers are told how
to be configured.</p>
<p>In the pull method, the server to be configured will pull its
configuration from the controlling server.</p>
<p>In the push method, the controlling server pushes the configuration
to the destination system</p>
<hr />
<p><a
href="https://www.scottericpetersen.com/multichannel-audio-devices-and-linux-not-a-love-story/">Example</a>
blog of an admin struggling with certain aspects of managing a linux
based audio environment and how ansible could help</p>
<p><a
href="https://www.scottericpetersen.com/multichannel-audio-devices-and-linux-not-a-love-story/">running
a univeristy linux based audio lab - nightmares and light</a></p>
<h2 data-number="10.1" id="query"><span
class="header-section-number">10.1</span> query</h2>
<p>I'll give you a scenario and I'd like you to describe how Ansible
could mitigate the problem.</p>
<blockquote>
<p>One issue (not a bug, proper) I had was installing packages from
KXStudio, their application suite with dependencies like JACK2 and a
number of other pro audio libraries. In that process, one file
/etc/security/limits.d/audio.conf is installed. That file makes it
possible for JACK to run “realtime.” Except this time, that file was
written as audio.conf.disabled. This is because a check is made during
installation to see if writing that file will break the system as
currently configured. Running a generic kernel is apparently one of
those things, so the file is written, but with ‘disabled’ appended. This
is, of course, written nowhere that I could logically find, but sure.
Worse, starting JACK manually either with Cadence or QJackCTL works — at
least it seems like everything is fine and there are no worries. Only
starting Ardour and trying to create a session will reveal that JACK
(which is already started??) can’t start, and the session can’t be
created. Wild. The fix is easy, just rename the file to audio.conf after
installing your low-latency kernel. But finding that out is a drag.
Also, installing the low-latency kernel first to avoid this step means a
manual reboot or writing a script with sufficient logic that runs at
startup to perform this reboot and then pick up at the appropriate
place. Not going to happen. Why? Too much work for what might be a bug
or might change the next time I have to do this. I have removed so many
workarounds in my days I’d just rather not.</p>
</blockquote>
<h2 data-number="10.2" id="response"><span
class="header-section-number">10.2</span> response</h2>
<p>Ansible could help mitigate this issue in a few ways:</p>
<ul>
<li><p>Using the <code>file</code> module, Ansible could check if the
<code>/etc/security/limits.d/audio.conf</code> file exists and rename it
to remove the <code>.disabled</code> suffix. This would ensure the file
is properly named to enable realtime audio capabilities.</p></li>
<li><p>Ansible's package management modules like <code>apt</code> could
be used to install the low-latency kernel first before installing the
KXStudio packages. This would avoid the need to have the audio.conf file
created with the <code>.disabled</code> suffix in the first
place.</p></li>
<li><p>Handlers could be used to trigger a reboot after the low-latency
kernel is installed. This way the reboot is performed automatically at
the right time in the playbook.</p></li>
<li><p>All of these steps could be encapsulated in an Ansible role
dedicated to setting up an audio production environment. The role
abstracts away the complexity so you can just focus on the desired state
rather than each individual workaround.</p></li>
<li><p>The role could also contain asserts to check if JACK starts
properly and Ardour can create a session. This validates the environment
is correctly configured after running the role.</p></li>
<li><p>Documentation within the comments, README or added
handlers/asserts would explain why particular steps are required to
avoid or work around issues like the audio.conf naming problem.</p></li>
</ul>
<p>In summary, Ansible gives you the automation capabilities to script
complex multi-step workflows like setting up an audio environment,
handle edge cases and inconsistencies across runs, and document what's
happening to mitigate tricky issues like this audio.conf example.</p>
<h2 data-number="10.3" id="query-1"><span
class="header-section-number">10.3</span> query</h2>
<p>Elaborate on how the built-in <em><strong>idempotence</strong></em>
function prevents problems such as described</p>
<h2 data-number="10.4" id="response-1"><span
class="header-section-number">10.4</span> response</h2>
<div class="sourceCode" id="cb15"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>Ansible&#39;s idempotence is a useful feature that can help prevent problems like the audio.conf naming issue. Here&#39;s how it works:</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Idempotence means that if an Ansible playbook is run multiple times, it should result in the same end state every time. So running the playbook once or five times makes no difference - the end result should be identical.</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>For example, let&#39;s say our audio setup playbook contains a task that renames audio.conf.disabled to audio.conf. The first time it runs, it will perform this rename operation. </span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>But the second time the playbook runs, Ansible will check first if audio.conf already exists before trying to rename the .disabled file. Since audio.conf exists from the first run, the rename task will be skipped because the desired end state of having audio.conf already exists.</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>This avoid potential issues like trying to rename a file that is already properly named from a previous run. The idempotent nature prevents unnecessary changes.</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>We can take advantage of this by crafting tasks that check the end state first, like the file existence check, before making any changes. This way Ansible will do the right thing on repeated runs.</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>For the audio setup example, we&#39;d likely perform the low-latency kernel install only once. But other tasks like renaming audio.conf and starting/validating JACK could be run repetitively while remaining idempotent.</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>So in summary, idempotence gives us flexibility to run playbooks multiple times but only make the necessary changes to achieve the desired end state. This prevents lots of potential problems from duplicate or unnecessary operations. It&#39;s a key Ansible feature that helps make playbook runs predictable and robust.</span></code></pre></div>
<h1 data-number="11" id="keybindings"><span
class="header-section-number">11</span> keybindings</h1>
<p>/ask One optimization I'd like to make relates to keybindings.
Keybindings can be set in i3, sxhkd and input-remapper. use creative
imagination to generate some possible solutions to consolidating
keybinding variables</p>
<p>Here are some suggestions for consolidating keybinding variables
across roles:</p>
<p>Create a shared "keybindings" role This role defines all keybinding
variables and common tasks Other roles like desktop, i3 import the
keybindings role keybindings role templates generate configs for each
WM/tool Use a common keybinding variables file Create
roles/keybindings/vars/main.yml Define types like modmaps, keys,
bindings Other roles import this vars file Create a keybinding
configuration data structure Define keymaps, bindings as a YAML
structure Render templates from a shared keybinds config Centralize
configuration templates Move keybinding templates to
keybindings/templates Other roles reference templates from there
Introduce conditionals Roles check if keybindings required Apply
bindings role conditionally This avoids duplication across roles and
ensures consistency. A shared keybindings role/vars approach modularizes
and centralizes configuration in one place while keeping per-WM tasks
separated.Template and variable references promote reusability.
Conditionals prevent unnecessary tasks.</p>
<p>/ask Where are the keybinding configurations located in the repo?</p>
<p>The keybinding configurations in the Ansible repo are located in
several places:</p>
<p>/syncopatedIaC/roles/i3/templates/home/.config/rofi-i3-keybindings</p>
<p>This script displays i3 keybindings in rofi by parsing the i3
config.</p>
<p>/syncopatedIaC/roles/i3/templates/home/.config/i3/config.j2</p>
<p>The main i3 configuration file template, which will contain
keybindings.</p>
<p>/syncopatedIaC/roles/sway/files/usr/share/sway/scripts/sbdp.py</p>
<p>A Python script for parsing Sway bindings and configs.</p>
<p>/syncopatedIaC/roles/x/tasks/sxhkd.yml</p>
<p>Tasks for generating and installing the sxhkd keybinding config.</p>
<p>/syncopatedIaC/roles/desktop/defaults/main.yml</p>
<p>Defines variables for applications to import like input-remapper.</p>
<p>/syncopatedIaC/roles/desktop/tasks/input-remapper.yml</p>
<p>Tasks for configuring input-remapper keys.</p>
<p>So in summary, keybindings are defined:</p>
<p>As templates rendered to config files Via scripts that parse configs
By variables for other roles to reference In tasks files for
applications that support keys The templates and variables approach
allows defining bindings centrally while keeping per-WM/app
configuration modular across roles.</p>
<p>/ask Is there a specific task or workflow that involves keybindings
in the repo?</p>
<p>Yes, there is a specific workflow involving keybindings in the
Ansible repo:</p>
<p>Keybinding variables are defined across various roles:</p>
<p>i3 role templates render i3 config from variables Sway role script
parses configs using variables X role imports sxhkd task using variables
Desktop role imports input-remapper using variables During playbook
runs, these roles are applied in order:</p>
<p>Base role establishes base system X role sets up X environment
Desktop role sets up DE and WMs i3/Sway roles configure specific WMs The
roles generate and install keybinding configs:</p>
<p>i3 role renders i3 config template sxhkd task generates sxhkd config
input-remapper config is set Services are reloaded to pickup
changes:</p>
<p>sxhkd reload task i3 config reload notification Keybindings can now
be used on the target systems.</p>
<p>So in summary, variables define bindings centrally, roles configure
each application, and the playbook run order ensures everything is set
up correctly before reloading configs.</p>
<p>This provides an automated, repeatable workflow to deploy desktops
with consistent keybindings across many systems using Ansible.</p>
<p>/ask Can you explain how the keybinding configurations are rendered
from templates to config files?</p>
<pre><code>Keybinding configurations are rendered from templates to config files using Jinja templating in Ansible.

Some examples:

i3 role templates/home/.config/i3/config.j2

This is the main i3 config template. It references variables like:

{{ i3.keybindings }}
{{ i3.workspaces }}
roles/x/templates/home/.config/sxhkd/sxhkdrc.j2

Template for sxhkd keys, references variables like:

{{ sxhkd.keys }}
roles/sway/files/parser.py

Python script that parses Sway configs, substituting variables like:

${mod}
When playbooks run these roles:

Variables define common keybindings
Templates are rendered to target paths
Template variables are substituted
Final config files are written
This allows:

Centrally defining keys without duplicating code
Consistency across many systems
Flexibility to customize bindings per host
Automatic config generation
Jinja finds and replaces variables in templates with their defined values. This populates templates to produce customized configuration files from a common definition.</code></pre>
<h1 data-number="12" id="diagrams"><span
class="header-section-number">12</span> diagrams</h1>
<div class="sourceCode" id="cb17"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="ex">/*</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>                                 <span class="ex">┌─────────────────────────────────────────┐</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    <span class="ex">hydrogen</span> ◄───┐               │                                         │</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>                 <span class="ex">│</span>               │   templates   scripts     patches       │</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>                 <span class="ex">│</span>               │                                         │</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>    <span class="ex">helm</span>  ◄──────┼───────────────┤                                         │</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>                 <span class="ex">│</span>               │                                         │</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>                 <span class="ex">│</span>               │                                         │</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>    <span class="ex">linuxsam</span> ◄───┘               │            git repo                     │</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>                             <span class="ex">┌───┤</span>                                         │</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>                             <span class="ex">│</span>   └────-────────────────────────────────────┘</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>                             <span class="ex">│</span>        </span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>                             <span class="ex">│</span>        </span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>                             <span class="ex">│</span>        </span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>                             <span class="ex">▼</span>                                    Untitled drawing</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>                             <span class="ex">│</span>        </span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>    <span class="ex">┌───────────────┬────────┼────────┼───────────┬──────────────┬─────────────┐</span></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>    <span class="ex">│</span>               │        │        │           │              │             │</span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>    <span class="ex">│</span>               │        │        │           │              │             │</span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>    <span class="ex">│</span>               │        │        │           ▼              ▼             ▼</span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>    <span class="ex">▼</span>               ▼        │        ▼</span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a><span class="ex">audacity</span>          reaper     │    bitwig        vst3        ambisonics        lv2</span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>                             <span class="ex">│</span></span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>                             <span class="ex">│</span></span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>                             <span class="ex">│</span></span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>                             <span class="ex">└───►</span>  sonic pi</span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a>                                    <span class="ex">jacktrip</span></span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a> <span class="ex">*/</span></span></code></pre></div>
<hr />
<pre class="shell"><code>
                                                            ┌─────────────┐
                                                            │             │
                                              ┌────────────►│   lapbot    │
                                              │             │             │
                                              │             └─────────────┘
                                              │
                   ┌──────────────┐           │
                   │              │           │
                   │   soundbot   ├───────────┤
                   │              │           │
                   └─────┬────────┘           │        ┌────────┐
                         │                    │        │        │
                         │                    │        │ bender │
                         │                    └───────►│        │
                         │                             │        │
                         │                             └────────┘
                         │
                         │                  ┌────────┐
     ┌─────────┐         │                  │        │
     │         │         │                  │ bigbot │
     │ tinybot │◄────────┴─────────────────►│        │
     │         │                            │        │
     └─────────┘                            │        │
                                            └────────┘
 </code></pre>
<div class="sourceCode" id="cb19"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="er">&quot;example/group_vars/all.yml&quot;</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;user&quot;</span><span class="er">=&gt;{</span><span class="dt">&quot;name&quot;</span><span class="er">=&gt;</span><span class="dt">&quot;b08x&quot;</span><span class="fu">,</span> <span class="dt">&quot;realname&quot;</span><span class="er">=&gt;</span><span class="dt">&quot;Robert Pannick&quot;</span><span class="fu">,</span> <span class="dt">&quot;group&quot;</span><span class="er">=&gt;</span><span class="dt">&quot;b08x&quot;</span><span class="fu">,</span> <span class="dt">&quot;uid&quot;</span><span class="er">=&gt;1000</span><span class="fu">,</span> <span class="dt">&quot;gid&quot;</span><span class="er">=&gt;1000</span><span class="fu">,</span> <span class="dt">&quot;secondary_groups&quot;</span><span class="er">=&gt;</span><span class="dt">&quot;input,video,audio&quot;</span><span class="fu">,</span> <span class="dt">&quot;sudoers&quot;</span><span class="er">=&gt;true</span><span class="fu">,</span> <span class="dt">&quot;home&quot;</span><span class="er">=&gt;</span><span class="dt">&quot;/home/b08x&quot;</span><span class="fu">,</span> <span class="dt">&quot;workspace&quot;</span><span class="er">=&gt;</span><span class="dt">&quot;/home/b08x/Workspace&quot;</span><span class="fu">,</span> <span class="dt">&quot;shell&quot;</span><span class="er">=&gt;</span><span class="dt">&quot;/usr/bin/zsh&quot;</span><span class="fu">,</span> <span class="dt">&quot;email&quot;</span><span class="er">=&gt;</span><span class="dt">&quot;rwpannick@gmail.com&quot;</span><span class="fu">,</span> <span class="dt">&quot;gpg&quot;</span><span class="er">=&gt;</span><span class="dt">&quot;36A6ECD355DB42B296C0CEE2157CA2FC56ECC96A&quot;</span><span class="fu">,</span> <span class="dt">&quot;dots&quot;</span><span class="er">=&gt;</span><span class="dt">&quot;git@github.com:b08x/dots.git&quot;</span><span class="fu">}</span><span class="er">,</span> </span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="er">&quot;users&quot;=&gt;</span><span class="ot">[</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">{</span><span class="dt">&quot;name&quot;</span><span class="er">=&gt;</span><span class="dt">&quot;root&quot;</span><span class="fu">,</span> <span class="dt">&quot;group&quot;</span><span class="er">=&gt;</span><span class="dt">&quot;root&quot;</span><span class="fu">,</span> <span class="dt">&quot;uid&quot;</span><span class="er">=&gt;0</span><span class="fu">,</span> <span class="dt">&quot;gid&quot;</span><span class="er">=&gt;0</span><span class="fu">,</span> <span class="dt">&quot;home&quot;</span><span class="er">=&gt;</span><span class="dt">&quot;/root&quot;</span><span class="fu">,</span> <span class="dt">&quot;shell&quot;</span><span class="er">=&gt;</span><span class="dt">&quot;/usr/bin/zsh&quot;</span><span class="fu">}</span><span class="ot">,</span> </span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">{</span><span class="dt">&quot;name&quot;</span><span class="er">=&gt;</span><span class="dt">&quot;b08x&quot;</span><span class="fu">,</span> <span class="dt">&quot;realname&quot;</span><span class="er">=&gt;</span><span class="dt">&quot;Robert Pannick&quot;</span><span class="fu">,</span> <span class="dt">&quot;group&quot;</span><span class="er">=&gt;</span><span class="dt">&quot;b08x&quot;</span><span class="fu">,</span> <span class="dt">&quot;uid&quot;</span><span class="er">=&gt;1000</span><span class="fu">,</span> <span class="dt">&quot;gid&quot;</span><span class="er">=&gt;1000</span><span class="fu">,</span> <span class="dt">&quot;secondary_groups&quot;</span><span class="er">=&gt;</span><span class="dt">&quot;input,video,audio&quot;</span><span class="fu">,</span> <span class="dt">&quot;sudoers&quot;</span><span class="er">=&gt;true</span><span class="fu">,</span> <span class="dt">&quot;home&quot;</span><span class="er">=&gt;</span><span class="dt">&quot;/home/b08x&quot;</span><span class="fu">,</span> <span class="dt">&quot;workspace&quot;</span><span class="er">=&gt;</span><span class="dt">&quot;/home/b08x/Workspace&quot;</span><span class="fu">,</span> <span class="dt">&quot;shell&quot;</span><span class="er">=&gt;</span><span class="dt">&quot;/usr/bin/zsh&quot;</span><span class="fu">,</span> <span class="dt">&quot;email&quot;</span><span class="er">=&gt;</span><span class="dt">&quot;rwpannick@gmail.com&quot;</span><span class="fu">,</span> <span class="dt">&quot;gpg&quot;</span><span class="er">=&gt;</span><span class="dt">&quot;36A6ECD355DB42B296C0CEE2157CA2FC56ECC96A&quot;</span><span class="fu">,</span> <span class="dt">&quot;dots&quot;</span><span class="er">=&gt;</span><span class="dt">&quot;git@github.com:b08x/dots.git&quot;</span><span class="fu">}</span><span class="ot">]</span><span class="er">,</span> </span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a><span class="er">&quot;autofs_client&quot;=&gt;</span><span class="fu">{</span><span class="dt">&quot;host&quot;</span><span class="er">=&gt;</span><span class="dt">&quot;bender&quot;</span><span class="fu">,</span> <span class="dt">&quot;shares&quot;</span><span class="er">=&gt;[</span><span class="dt">&quot;backup&quot;</span><span class="fu">,</span> <span class="dt">&quot;storage&quot;</span><span class="er">]</span><span class="fu">}</span><span class="er">,</span> </span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a><span class="er">&quot;docker&quot;=&gt;</span><span class="fu">{</span><span class="dt">&quot;storage&quot;</span><span class="er">=&gt;</span><span class="dt">&quot;/var/lib/docker&quot;</span><span class="fu">,</span> <span class="dt">&quot;service&quot;</span><span class="er">=&gt;{</span><span class="dt">&quot;enabled&quot;</span><span class="er">=&gt;true</span><span class="fu">}</span><span class="er">,</span> <span class="er">&quot;nvidia&quot;=&gt;false,</span> <span class="er">&quot;users&quot;=&gt;</span><span class="ot">[</span><span class="st">&quot;b08x&quot;</span><span class="ot">]</span><span class="er">},</span> </span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a><span class="er">data</span> <span class="er">=</span> <span class="fu">{</span> </span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;libvirt&quot;</span><span class="er">=&gt;</span> <span class="er">{</span> </span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;service&quot;</span><span class="er">=&gt;</span> <span class="er">{</span></span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;enabled&quot;</span><span class="er">=&gt;false</span></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>      <span class="fu">}</span><span class="er">,</span> </span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>    <span class="er">&quot;users&quot;=&gt;</span> <span class="ot">[</span><span class="st">&quot;b08x&quot;</span><span class="ot">]</span></span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>    <span class="er">}</span></span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a><span class="er">}</span></span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a><span class="er">table</span> <span class="er">=</span> <span class="er">Terminal::Table.new</span> <span class="er">do</span> <span class="er">|t|</span></span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a>  <span class="er">t.title</span> <span class="er">=</span> <span class="er">&quot;User</span> <span class="er">Information&quot;</span></span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a>  <span class="er">t.headings</span> <span class="er">=</span> <span class="ot">[</span><span class="st">&quot;Key&quot;</span><span class="ot">,</span> <span class="st">&quot;Value&quot;</span><span class="ot">]</span></span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a>  <span class="er">data</span><span class="ot">[</span><span class="st">&quot;libvirt&quot;</span><span class="ot">]</span><span class="er">.each</span> <span class="er">do</span> <span class="er">|key,</span> <span class="er">value|</span></span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a>    <span class="er">t.add_row(</span><span class="ot">[</span><span class="er">key</span><span class="ot">,</span> <span class="er">value</span><span class="ot">]</span><span class="er">)</span></span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a>  <span class="er">end</span></span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a><span class="er">end</span></span>
<span id="cb19-31"><a href="#cb19-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-32"><a href="#cb19-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-33"><a href="#cb19-33" aria-hidden="true" tabindex="-1"></a><span class="er">&quot;example/group_vars/server.yml&quot;</span></span>
<span id="cb19-34"><a href="#cb19-34" aria-hidden="true" tabindex="-1"></a><span class="er">No</span> <span class="er">Variables</span> <span class="er">in</span> <span class="er">example/group_vars/server.yml</span></span>
<span id="cb19-35"><a href="#cb19-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-36"><a href="#cb19-36" aria-hidden="true" tabindex="-1"></a><span class="er">&quot;example/group_vars/workstation.yml&quot;</span></span>
<span id="cb19-37"><a href="#cb19-37" aria-hidden="true" tabindex="-1"></a><span class="er">No</span> <span class="er">Variables</span> <span class="er">in</span> <span class="er">example/group_vars/workstation.yml</span></span>
<span id="cb19-38"><a href="#cb19-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-39"><a href="#cb19-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-40"><a href="#cb19-40" aria-hidden="true" tabindex="-1"></a><span class="er">+----------------------------------------------------------------------------------------------------------------------------&gt;&gt;</span></span>
<span id="cb19-41"><a href="#cb19-41" aria-hidden="true" tabindex="-1"></a><span class="er">|</span>            <span class="er">File</span>            <span class="er">|</span>      <span class="er">Key</span>      <span class="er">|</span>                                                                               <span class="er">&gt;&gt;</span></span>
<span id="cb19-42"><a href="#cb19-42" aria-hidden="true" tabindex="-1"></a><span class="er">+----------------------------------------------------------------------------------------------------------------------------&gt;&gt;</span></span>
<span id="cb19-43"><a href="#cb19-43" aria-hidden="true" tabindex="-1"></a><span class="er">|</span> <span class="er">example/group_vars/all.yml</span> <span class="er">|</span> <span class="er">user</span>          <span class="er">|</span> <span class="fu">{</span><span class="dt">&quot;name&quot;</span><span class="er">=&gt;</span><span class="dt">&quot;b08x&quot;</span><span class="fu">,</span> <span class="dt">&quot;realname&quot;</span><span class="er">=&gt;</span><span class="dt">&quot;Robert Pannick&quot;</span><span class="fu">,</span> <span class="dt">&quot;group&quot;</span><span class="er">=&gt;</span><span class="dt">&quot;b08x&quot;</span><span class="fu">,</span> <span class="dt">&quot;uid&quot;</span><span class="er">=&gt;1000</span><span class="fu">,</span> <span class="dt">&quot;&gt;&gt;</span></span>
<span id="cb19-44"><a href="#cb19-44" aria-hidden="true" tabindex="-1"></a><span class="dt">| example/group_vars/all.yml | users         | [{&quot;</span><span class="er">name</span><span class="dt">&quot;=&gt;&quot;</span><span class="er">root</span><span class="dt">&quot;, &quot;</span><span class="er">group</span><span class="dt">&quot;=&gt;&quot;</span><span class="er">root</span><span class="dt">&quot;, &quot;</span><span class="er">uid</span><span class="dt">&quot;=&gt;0, &quot;</span><span class="er">gid</span><span class="dt">&quot;=&gt;0, &quot;</span><span class="er">home</span><span class="dt">&quot;=&gt;&quot;</span><span class="er">/root</span><span class="dt">&quot;, &quot;</span><span class="er">shell&gt;&gt;</span></span>
<span id="cb19-45"><a href="#cb19-45" aria-hidden="true" tabindex="-1"></a><span class="er">|</span> <span class="er">example/group_vars/all.yml</span> <span class="er">|</span> <span class="er">autofs_client</span> <span class="er">|</span> <span class="er">{</span><span class="dt">&quot;host&quot;</span><span class="er">=&gt;</span><span class="dt">&quot;bender&quot;</span><span class="fu">,</span> <span class="dt">&quot;shares&quot;</span><span class="er">=&gt;[</span><span class="dt">&quot;backup&quot;</span><span class="fu">,</span> <span class="dt">&quot;storage&quot;</span><span class="er">]</span><span class="fu">}</span>                           <span class="er">&gt;&gt;</span></span>
<span id="cb19-46"><a href="#cb19-46" aria-hidden="true" tabindex="-1"></a><span class="er">|</span> <span class="er">example/group_vars/all.yml</span> <span class="er">|</span> <span class="er">docker</span>        <span class="er">|</span> <span class="fu">{</span><span class="dt">&quot;storage&quot;</span><span class="er">=&gt;</span><span class="dt">&quot;/var/lib/docker&quot;</span><span class="fu">,</span> <span class="dt">&quot;service&quot;</span><span class="er">=&gt;{</span><span class="dt">&quot;enabled&quot;</span><span class="er">=&gt;true</span><span class="fu">}</span><span class="er">,</span> <span class="er">&quot;nvidia&quot;=&gt;false,</span> <span class="er">&gt;&gt;</span></span>
<span id="cb19-47"><a href="#cb19-47" aria-hidden="true" tabindex="-1"></a><span class="er">|</span> <span class="er">example/group_vars/all.yml</span> <span class="er">|</span> <span class="er">libvirt</span>       <span class="er">|</span> <span class="fu">{</span><span class="dt">&quot;service&quot;</span><span class="er">=&gt;{</span><span class="dt">&quot;enabled&quot;</span><span class="er">=&gt;false</span><span class="fu">}</span><span class="er">,</span> <span class="er">&quot;users&quot;=&gt;</span><span class="ot">[</span><span class="st">&quot;b08x&quot;</span><span class="ot">]</span><span class="er">}</span>                            <span class="er">&gt;&gt;</span></span>
<span id="cb19-48"><a href="#cb19-48" aria-hidden="true" tabindex="-1"></a><span class="er">+----------------------------------------------------------------------------------------------------------------------------&gt;&gt;</span></span></code></pre></div>
<div class="sourceCode" id="cb20"><pre
class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span> <span class="vs">&#39;terminal-table&#39;</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>data <span class="kw">=</span> <span class="kw">{</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;user&quot;</span> <span class="kw">=&gt;</span> <span class="kw">{</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;name&quot;</span> <span class="kw">=&gt;</span> <span class="st">&quot;b08x&quot;</span>,</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;realname&quot;</span> <span class="kw">=&gt;</span> <span class="st">&quot;Robert Pannick&quot;</span>,</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;group&quot;</span> <span class="kw">=&gt;</span> <span class="st">&quot;b08x&quot;</span>,</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;uid&quot;</span> <span class="kw">=&gt;</span> <span class="dv">1000</span>,</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;gid&quot;</span> <span class="kw">=&gt;</span> <span class="dv">1000</span>,</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;secondary_groups&quot;</span> <span class="kw">=&gt;</span> <span class="st">&quot;input,video,audio&quot;</span>,</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;sudoers&quot;</span> <span class="kw">=&gt;</span> <span class="dv">true</span>,</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;home&quot;</span> <span class="kw">=&gt;</span> <span class="st">&quot;/home/b08x&quot;</span>,</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;workspace&quot;</span> <span class="kw">=&gt;</span> <span class="st">&quot;/home/b08x/Workspace&quot;</span>,</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;shell&quot;</span> <span class="kw">=&gt;</span> <span class="st">&quot;/usr/bin/zsh&quot;</span>,</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;email&quot;</span> <span class="kw">=&gt;</span> <span class="st">&quot;rwpannick@gmail.com&quot;</span>,</span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;gpg&quot;</span> <span class="kw">=&gt;</span> <span class="st">&quot;36A6ECD355DB42B296C0CEE2157CA2FC56ECC96A&quot;</span>,</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;dots&quot;</span> <span class="kw">=&gt;</span> <span class="st">&quot;git@github.com:b08x/dots.git&quot;</span></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>  <span class="kw">}</span></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>table <span class="kw">=</span> <span class="dt">Terminal</span><span class="kw">::</span><span class="dt">Table</span><span class="at">.new</span> <span class="cf">do</span> <span class="kw">|</span>t<span class="kw">|</span></span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>  t<span class="at">.title</span> <span class="kw">=</span> <span class="st">&quot;User Information&quot;</span></span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>  t<span class="at">.headings</span> <span class="kw">=</span> <span class="kw">[</span><span class="st">&quot;Key&quot;</span>, <span class="st">&quot;Value&quot;</span><span class="kw">]</span></span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a>  data<span class="kw">[</span><span class="st">&quot;user&quot;</span><span class="kw">]</span><span class="at">.each</span> <span class="cf">do</span> <span class="kw">|</span>key, value<span class="kw">|</span></span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>    t<span class="at">.add_row</span>(<span class="kw">[</span>key, value<span class="kw">]</span>)</span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end</span></span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a><span class="fu">puts</span> table</span></code></pre></div>
<p><a
href="https://github.com/aplatform64/aplatform64">https://github.com/aplatform64/aplatform64</a></p>
<p><a
href="https://github.com/vvo/ansible-archee/blob/master/roles/base/vars/main.yml">https://github.com/vvo/ansible-archee/blob/master/roles/base/vars/main.yml</a></p>
<hr />
<div class="sourceCode" id="cb21"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="ex">TASK</span> [user : Create systemd drop-in file for virtual console autologin] <span class="pp">*****************************************************************************************************</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="ex">---</span> before: /etc/systemd/system/getty@tty1.service.d/autologin.conf</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="ex">+++</span> after: /tmp/ansible-local-166163vxt9666/tmpkrp016w2/autologin.conf.j2</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="ex">@@</span> <span class="at">-1,5</span> +1,4 @@</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a> <span class="ex">[Service]</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="ex">+Environment=XDG_SESSION_TYPE=x11</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a> <span class="va">ExecStart</span><span class="op">=</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="ex">-ExecStart=-/sbin/agetty</span> <span class="at">-o</span> <span class="st">&#39;-p -f -- \\u&#39;</span> <span class="at">--noclear</span> <span class="at">--autologin</span> b08x %I <span class="va">$TERM</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="ex">-Type=simple</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="ex">-Environment=XDG_SESSION_TYPE=x11</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="ex">+ExecStart=-/sbin/agetty</span> <span class="at">-o</span> <span class="st">&#39;-p -f -- \\u&#39;</span> <span class="at">--noclear</span> <span class="at">--autologin</span> b08x <span class="at">-</span> <span class="va">$TERM</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a><span class="ex">changed:</span> <span class="pp">[</span><span class="ss">tinybot</span><span class="pp">]</span></span></code></pre></div>
<div class="sourceCode" id="cb22"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="ex">changed:</span> <span class="pp">[</span><span class="ss">soundbot</span><span class="pp">]</span> =<span class="op">&gt;</span> <span class="er">(</span><span class="va">item</span><span class="op">=</span>.xinitrc<span class="kw">)</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ok:</span> <span class="pp">[</span><span class="ss">tinybot</span><span class="pp">]</span> =<span class="op">&gt;</span> <span class="er">(</span><span class="va">item</span><span class="op">=</span>.xprofile<span class="kw">)</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="ex">ok:</span> <span class="pp">[</span><span class="ss">tinybot</span><span class="pp">]</span> =<span class="op">&gt;</span> <span class="er">(</span><span class="va">item</span><span class="op">=</span>.xserverrc<span class="kw">)</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="ex">ok:</span> <span class="pp">[</span><span class="ss">tinybot</span><span class="pp">]</span> =<span class="op">&gt;</span> <span class="er">(</span><span class="va">item</span><span class="op">=</span>.Xresources<span class="kw">)</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="ex">---</span> before: /home/b08x/.xprofile</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="ex">+++</span> after: /tmp/ansible-local-29171cmmck9hw/tmpt3lq6xfk/.xprofile.j2</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="ex">@@</span> <span class="at">-32,11</span> +32,5 @@</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a> <span class="fu">bash</span> ~/.screenlayout/soundbot.sh</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a><span class="ex">+</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a> <span class="kw">[[</span> <span class="ot">-f</span> <span class="st">&quot;</span><span class="va">$HOME</span><span class="st">/.asound.state&quot;</span> <span class="kw">]]</span> <span class="kw">&amp;&amp;</span> <span class="ex">alsactl</span> restore <span class="at">-f</span> <span class="st">&quot;</span><span class="va">$HOME</span><span class="st">/.asound.state&quot;</span></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a><span class="ex">-</span></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a><span class="ex">-#</span> wanting to have keyrings unlocked at login<span class="pp">???</span> trying this out in xprofile:</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a><span class="ex">-eval</span> <span class="va">$(</span><span class="ex">/usr/bin/gnome-keyring-daemon</span> <span class="at">--start</span> <span class="at">--components</span><span class="op">=</span>secrets,ssh<span class="va">)</span></span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a><span class="ex">-</span></span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a><span class="ex">-systemctl</span> <span class="at">--user</span> import-environment GPG_TTY SSH_AUTH_SOCK</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a><span class="ex">-</span></span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a><span class="ex">-dbus-update-activation-environment</span> <span class="at">--systemd</span> DBUS_SESSION_BUS_ADDRESS DISPLAY XAUTHORITY</span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a><span class="ex">changed:</span> <span class="pp">[</span><span class="ss">soundbot</span><span class="pp">]</span> =<span class="op">&gt;</span> <span class="er">(</span><span class="va">item</span><span class="op">=</span>.xprofile<span class="kw">)</span></span></code></pre></div>
<h1 data-number="13" id="roles-1"><span
class="header-section-number">13</span> roles</h1>
<p>The roles directory in Ansible contains different roles that can be
included in a playbook to configure certain aspects or components of a
system. Each role is self-contained and focuses on a specific task or
domain.</p>
<p>The structure within each role directory is generally consistent and
includes:</p>
<ul>
<li><p>README.md - Documents what the role does and how to use
it.</p></li>
<li><p>defaults/ - Default variable values.</p></li>
<li><p>files/ - Static files used by the role.</p></li>
<li><p>handlers/ - Handler definitions.</p></li>
<li><p>templates/ - Template files rendered by the role.</p></li>
<li><p>tasks/ - Main.yml containing the role's tasks.</p></li>
<li><p>vars/ - Variables passed to the role.</p></li>
<li><p>tests/ - Role tests.</p></li>
<li><p>meta/ - Role dependencies.</p></li>
</ul>
<p>Some examples roles provided are:</p>
<ul>
<li><p>alsa/ - Configure sound card and ALSA.</p></li>
<li><p>i3/ - Install and configure i3 window manager.</p></li>
<li><p>zsh/ - Configure Zsh shell.</p></li>
<li><p>nas/ - Setup NFS shares for a NAS role.</p></li>
<li><p>bash/ - Tasks related to Bash shell configuration.</p></li>
</ul>
<p>Each role has a uniform structure and documention in the README file.
This makes the roles reusable and easy to understand for playbook
authors applying them. The roles provide modularization and logical
grouping of related tasks into discrete units that can be mixed and
matched across playbooks as needed.</p>
<hr />
<p>The roles directory in Ansible is used to define roles, which are
reusable groups of tasks, files, templates, and variables that can be
included across playbooks. This allows for logical grouping and
modularization of Ansible content.</p>
<p>Some of the key roles defined in the
/syncopatedIaC/tests/testplaybook.yml file include:</p>
<p>base - This role handles basic system configuration and is likely
applied to all hosts. Its vars/main.yml file sets an expected_value
variable.</p>
<p>terminal - Configures terminal emulators like kitty and
alacritty.</p>
<p>network - Configures network interfaces and connections.</p>
<p>ruby - Installs Ruby and related gems defined in the Gemfile.</p>
<p>audio - Configures audio packages and settings for audio
applications. Roles like alsa, pipewire, jack further define audio stack
configurations.</p>
<p>docker - Installs and configures Docker.</p>
<p>libvirt - Configures libvirt virtualization.</p>
<p>theme - Configure desktop themes.</p>
<p>desktop - Handles desktop environment, windows manager, and
application configurations.</p>
<p>user - Configure user accounts and homes.</p>
<p>applications - Installs and configures additional desired
applications.</p>
<p>So in summary, the roles directory allows grouping configurations by
concern or domain into reusable roles that can be included across
systems defined in the inventory to achieve a desired result. The roles
eliminate duplication and make the playbook logic modular and
maintainable.</p>
<h2 data-number="13.1" id="the-base-role"><span
class="header-section-number">13.1</span> the base role</h2>
<p>The main tasks performed by the base role include:</p>
<ul>
<li><p>Ensuring root directories exist that will be used by other
roles.</p></li>
<li><p>Configuring environment variables and default paths according to
the XDG Base Directory spec. This includes things like $HOME/.config,
$XDG_CONFIG_HOME, etc.</p></li>
<li><p>Configuring SSH daemon settings like PermitRootLogin.</p></li>
<li><p>Installing SSH keys and known_hosts files.</p></li>
<li><p>Configuring passwordless sudo and Sudoers rules for the
automation user.</p></li>
<li><p>Managing package repositories - adds required repos, imports
keys.</p></li>
<li><p>Updating all packages to latest versions.</p></li>
<li><p>Installing basic utility packages like vim, traceroute,
etc.</p></li>
<li><p>Configuring the package manager config - apt sources.list,
pacman.conf, etc.</p></li>
<li><p>Managing the Linux kernel, building initramfs images.</p></li>
<li><p>Configuring the bootloader (GRUB).</p></li>
<li><p>Installing basic services like autofs for automounting.</p></li>
<li><p>Deploying common scripts and utilities to all hosts.</p></li>
</ul>
<p>So in summary, it handles fundamental OS configuration and enables
basic functionality that is reused across all other roles for a
standardized environment. This establishes a common baseline.</p>
<p>Key files involved are roles/base/tasks/main.yml and the included
task files for each subdomain.</p>
<h2 data-number="13.2" id="i3-1"><span
class="header-section-number">13.2</span> i3</h2>
<h4 data-number="13.2.0.1"
id="initial-design-and-environment-support"><span
class="header-section-number">13.2.0.1</span> Initial Design and
Environment Support:</h4>
<p>The i3 role contains configuration related to installing and setting
up the i3 window manager.</p>
<p>The role directory follows the standard structure:</p>
<ul>
<li><p>README.md - Documentation on what the role does.</p></li>
<li><p>defaults/main.yml - Default variable values.</p></li>
<li><p>handlers/main.yml - Role handlers.</p></li>
<li><p>tasks/main.yml - Main tasks file including imports for any
additional tasks files.</p></li>
<li><p>templates/ - Template files for configuration.</p></li>
<li><p>vars/main.yml - Role variables.</p></li>
</ul>
<p>Some specific content and tasks handled by the i3 role include:</p>
<ul>
<li>Installing the i3 package</li>
<li>Generating and configuring i3 configuration files from
templates</li>
<li>Setting up i3 autostart applications</li>
<li>Configuring i3 window bindings and workspaces</li>
<li>Managing i3 service - enabling, starting, restarting</li>
<li>Importing additional tasks files for areas like i3bar, i3blocks,
etc.</li>
</ul>
<p>So in summary, it provides all the configuration necesssary to
install, set up and manage i3 as the window manager through Ansible in a
repeatable way. This includes package installation, configuration
generation and ongoing service management.</p>
<p>The role is self-contained to focus specifically on i3 tasks while
following best practices for role structure and documentation.</p>
<h1 data-number="14" id="applications"><span
class="header-section-number">14</span> Applications</h1>
<p>This section describes some of the specialized audio tools and
utilities you can easily include in your setup using this playbook:</p>
<ul>
<li><p><strong>baudline (Signal Analyzer)</strong>: A powerful,
real-time frequency spectrum analyzer and signal viewer. Indispensable
for troubleshooting audio issues, visualizing frequency content, and
analyzing incoming audio. (<a
href="https://www.baudline.com"><span>https://www.baudline.com</span></a>)</p></li>
<li><p><strong>jacktrip (Network Audio Streaming)</strong>: Enables
low-latency, uncompressed audio transmission over standard networks.
Collaborate remotely in real time, bridge multiple studios, or connect
hardware devices over long distances. (<a
href="https://github.com/jacktrip/jacktrip.git"><span>https://github.com/jacktrip/jacktrip.git</span></a>)</p></li>
<li><p><strong>ocenaudio (Cross-Platform Audio Editing)</strong>: A
streamlined yet versatile audio editor well-suited for quick editing
tasks, batch processing, and manipulating audio files for multimedia
projects. (<a
href="https://www.ocenaudio.com"><span>https://www.ocenaudio.com</span></a>)</p></li>
<li><p><strong>Patchage (Graphical Patchbay)</strong>: Easily connect
audio and MIDI software together using a flexible, drag-and-drop
interface. Experiment, try out different routing ideas, or manage
complex signal flows in large projects. (<a
href="https://gitlab.com/drobilla/patchage.git"><span>https://gitlab.com/drobilla/patchage.git</span></a>)</p></li>
<li><p><strong>Polyphone (Modular Sound Font Editor)</strong>: Create
and edit your own sample-based virtual instruments using the .SFZ sound
font format. Ideal for crafting custom sounds, sampling hardware, or
building unique virtual instruments. (<a
href="https://github.com/davy7125/polyphone.git"><span>https://github.com/davy7125/polyphone.git</span></a>)</p></li>
<li><p><strong>qmidinet (MIDI Network Router/Hub)</strong>: Manipulate
and route MIDI signals within your setup. Create virtual MIDI
connections, filter events, or use MIDI over the network for wireless
control or connecting multiple machines. (<a
href="https://github.com/rncbc/qmidinet.git"><span>https://github.com/rncbc/qmidinet.git</span></a>)</p></li>
<li><p><strong>REAPER (Digital Audio Workstation)</strong>: A
full-featured DAW favored for its efficiency, flexible routing
capabilities, and deep customization options. Ideal for professional
recording, mixing, and mastering. (<a
href="https://www.reaper.fm"><span>https://www.reaper.fm</span></a>)</p></li>
<li><p><strong>Scala (Microtonal Tuning Software)</strong>: Explore the
world beyond standard 12-tone equal temperament. Create custom scales,
re-tune MIDI instruments, or analyze tuning systems. (<a
href="http://www.huygens-fokker.org/software/"><span>http://www.huygens-fokker.org/software/</span></a>)</p></li>
<li><p><strong>SWAMI (MIDI CC Automation)</strong>: Create elaborate
MIDI control change (CC) automation curves, sequences, and LFOs. Control
software plugins, hardware synthesizers, and automate parameters within
your DAW. (<a
href="https://github.com/swami/swami.git"><span>https://github.com/swami/swami.git</span></a>)</p></li>
<li><p><strong>Tony (Audio Time Stretching/Pitch Shifting)</strong>:
Manipulate the speed and pitch of audio files independently. Slow down
samples for transcription, create interesting sonic textures, or adjust
vocals and instruments without affecting their original tempo. (<a
href="https://code.soundsoftware.ac.uk/attachments/download/2617"><span>https://code.soundsoftware.ac.uk/attachments/download/2617</span></a>)</p></li>
<li><p><strong>TouchOSC and Protokol (Mobile Control Surfaces)</strong>:
Control your DAW, software plugins, or lighting rigs wirelessly using
custom interfaces. Design layouts with faders, knobs, buttons, and more
on your tablet or smartphone. (<a
href="https://hexler.net/pub/touchosc"><span>https://hexler.net/pub/touchosc</span></a>
and <a
href="https://hexler.net/pub/protokol/"><span>https://hexler.net/pub/protokol/</span></a>)</p></li>
</ul>
<p><strong>Note:</strong> This is just a selection of the vast world of
Linux audio tools! Customize the playbook to fit your specific workflow
and creative needs.</p>
                </main>

                <nav class="nav-wrapper" aria-label="Page navigation">
                    <!-- Mobile navigation buttons -->




                    <div style="clear: both"></div>
                </nav>
            </div>
        </div>

        <nav class="nav-wide-wrapper" aria-label="Page navigation">

        </nav>

    </div>

    <script src="template/book.js" type="text/javascript" charset="utf-8"></script>

</body>
</html>
