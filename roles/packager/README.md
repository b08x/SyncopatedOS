# pkgrr

Archlinux pkgbuilds

Browse the [repository](http://soundbot.hopto.org/packages/archlinux/)


| name                                                                                                             | description                                                                                                    | version                |
|------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------|------------------------|
| [ambix-o1](https://github.com/kronihias/ambix)                                                                   | FOA Ambix VST, LV2 Plug-ins                                                                                    | 0.2.10                 |
| [ambix-o3](https://github.com/kronihias/ambix)                                                                   | 3rd Order Ambix VST, LV2 Plug-ins                                                                              | 0.2.10                 |
| [ambix-o5](https://github.com/kronihias/ambix)                                                                   | 5th Order Ambix VST, LV2 Plug-ins                                                                              | 0.2.10                 |
| [antimicrox](https://github.com/AntiMicroX/antimicroX)                                                           | Graphical program used to map keyboard buttons and mouse controls to a gamepad                                 | 3.3.3                  |
| [autofs](https://www.kernel.org/pub/linux/daemons/autofs/)                                                       | A kernel-based automounter for Linux                                                                           | 5.1.8                  |
| [baudline-bin](http://www.baudline.com/)                                                                         | Time-frequency browser designed for scientific visualization of the spectral domain.                           | 1.08                   |
| [bipscript](http://www.bipscript.org)                                                                            | A scripting language for interactive music                                                                     | 0.17                   |
| [bipscript-ide](http://www.bipscript.org)                                                                        | IDE for the bipscript language                                                                                 | 0.17                   |
| [bluetooth-autoconnect](https://github.com/jrouleau/bluetooth-autoconnect)                                       | A service to automatically connect to all paired and trusted bluetooth devices                                 | 1.3                    |
| [caps-lv2-git](http://quitte.de/dsp/caps.html)                                                                   | The LADSPA C* Audio Plugin Suite (LV2 port)                                                                    | 0.9.24.r153.072e2fe    |
| [catch2-3.0.1](https://github.com/catchorg/Catch2/)                                                              | Modern, C++-native, header-only, test framework for unit-tests, TDD and BDD (v3)                               | 3.0.1                  |
| [crossguid](https://github.com/graeme-hill/crossguid)                                                            | a minimal, cross platform, C++ GUID library                                                                    | 0.2.2.r52.gca1bf4b     |
| [epson-inkjet-printer-escpr2](http://download.ebz.epson.net/dsc/search/01/search/?OSC)                           | Epson Inkjet Printer Driver 2 (ESC/P-R) for Linux                                                              | 1.1.60                 |
| [fmit](https://github.com/gillesdegottex/fmit)                                                                   | Free Music Instrument Tuner                                                                                    | 1.2.14                 |
| [gitflow-avh](https://github.com/petervanderdoes/gitflow/)                                                       | Extend git with Vincent                                                                                        | 1.12.3                 |
| [hydrogen-git](https://github.com/hydrogen-music/hydrogen)                                                       | An advanced drum machine (git version)                                                                         | 1.1.1.r1064.ga219c3092 |
| [iempluginsuite-git](https://plugins.iem.at)                                                                     | Plug-in suite including Ambisonic plug-ins up to 7th order                                                     | v1.14.1.r0.g5be3f97    |
| [ingen-git](https://drobilla.net/software/ingen.html)                                                            | A modular plugin host for JACK and LV2 (git version)                                                           | 0.5.1.r3006.819fba38   |
| [input-remapper-git](https://github.com/sezanzeb/input-remapper/)                                                | A tool to change and program the mapping of your input device buttons.                                         | 1.5.0.r12.gb0478435    |
| [intersect.lv2-git](https://github.com/sboukortt/intersect-lv2)                                                  | LV2 plugin to split 2 audio channels into 3.                                                                   | 1.3.r0.g18a45e4        |
| [jack-keyboard](http://jack-keyboard.sourceforge.net/)                                                           | Virtual MIDI keyboard that uses JACK MIDI.                                                                     | 2.7.2                  |
| [jack_link-git](https://github.com/rncbc/jack_link.git)                                                          | JACK transport timebase bridge to Ableton Link                                                                 | v0.1.8.r0.g2065e45     |
| [jack_snapshot](http://sourceforge.net/projects/heaven/files/Audio%20Applications/Jack%20Related/jack_snapshot/) | stores and restores a set of JACK connections                                                                  | 0.0.4                  |
| [jalv-select-git](https://github.com/brummer10/jalv_select)                                                      | A little GUI to select installed lv2 plug-ins and run them with jalv.                                          | 1.0.r99.75a5229        |
| [kissfft](https://github.com/mborgerding/kissfft)                                                                | A mixed-radix Fast Fourier Transform based up on the principle, Keep It Simple, Stupid.                        | 131.1.0                |
| [lsp-plugins-git](https://lsp-plug.in)                                                                           | Collection of open-source plugins                                                                              | 1.2.5.r0.g4ffd3dd5     |
| [libgig-svn](http://www.linuxsampler.org/)                                                                       | Gigasampler file access library                                                                                | r4054                  |
| [linuxsampler-svn](http://www.linuxsampler.org/)                                                                 | Sampler backend, including sampler engine, audio and MIDI drivers, network layer (LSCP) API and native C++ API | r4054                  |
| [lv2-c++-tools](http://ll-plugins.nongnu.org/hacking.html)                                                       | Tools and libraries that may come in handy when writing LV2 plugins.                                           | 1.0.7                  |
| [mcfx-o1](https://github.com/kronihias/mcfx)                                                                     | FOA Ambix Plug-in Suite                                                                                        | 0.5.11                 |
| [mcfx-o3](https://github.com/kronihias/mcfx)                                                                     | 3rd Order Ambix Plug-in Suite                                                                                  | 0.5.11                 |
| [mcfx-o5](https://github.com/kronihias/mcfx)                                                                     | 5th Order Ambix Plug-in Suite                                                                                  | 0.5.11                 |
| [mpv-plugin-excerpt-git](https://gitlab.com/lvml/mpv-plugin-excerpt)                                             | Excerpt creation from within mpv                                                                               | r16.09c8a7a            |
| [nitrogen-git](https://github.com/l3ib/nitrogen)                                                                 | Background browser and setter for X windows - git version                                                      | 1.6.1r306.d48ccb8      |
| [njconnect](https://sourceforge.net/projects/njconnect/)                                                         | Curses Jack connection manager                                                                                 | 1.6                    |
| [non-mixer-lv2-git](http://non.tuxfamily.org/)                                                                   | Jack audio mixer from the NON DAW + LV2 plugin patch by falkTX and others                                      | 1.1.0.r735.g7b1fc6e    |
| [ocenaudio-bin](https://www.ocenaudio.com/)                                                                      | Cross-platform, easy to use, fast and functional audio editor                                                  | 3.11.22                |
| [paru-bin](https://github.com/morganamilo/paru)                                                                  | Feature packed AUR helper                                                                                      | 1.11.2                 |
| [platformfolders](https://github.com/sago007/PlatformFolders)                                                    | A C++ library to look for special directories like My Documents and %APPDATA%                                  | 4.2.0                  |
| [qmidiarp-git](https://sourceforge.net/projects/qmidiarp/)                                                       | A MIDI arpeggiator, phrase generator and controller LFO for the ALSA sequencer.                                | 0.6.5.r20.gd774efc     |
| [radiotray-ng](https://github.com/ebruck/radiotray-ng)                                                           | An Internet radio player for Linux                                                                             | 0.2.8                  |
| [raul](https://drobilla.net/software/raul/)                                                                      | C++ Realtime Audio Utility Library                                                                             | 2.0.0                  |
| [raysession-git](https://github.com/Houston4444/RaySession)                                                      | Session manager for audio programs using the Non Session Manager (NSM) API                                     | r1791.07bcb94          |
| [reproc](https://github.com/DaanDeMeyer/reproc)                                                                  | Cross-platform library that simplifies working with external CLI applications from C and C++                   | 14.2.4                 |
| [scala-music](http://www.huygens-fokker.org/scala/)                                                              | Music software for experimentation with tunings and different kind of scales                                   | 2.46d                  |
| [scala-music-scales](http://www.huygens-fokker.org/scala/)                                                       | Collection of scales to be used with the Scala music software                                                  | 90                     |
| [sendmidi](https://github.com/gbevin/SendMIDI)                                                                   | Multi-platform command-line tool to send out MIDI messages                                                     | 1.2.0                  |
| [sonic-pi-git](http://sonic-pi.net/)                                                                             | The Live Coding Music Synth for Everyone                                                                       | v4.3.0.r133.g94f25354c |
| [sonic-visualiser-git](https://code.soundsoftware.ac.uk/projects/sonic-visualiser)                               | A viewer and analyser of music audio files.                                                                    | v4.5.1.r2.gcd403e4     |
| [sononym](https://www.sononym.net/)                                                                              | Searchable Sound                                                                                               | 1.4.2                  |
| [sooperlooper-git](http://essej.net/sooperlooper/)                                                               | Live looping sampler capable of immediate loop recording. Built from git.                                      | r549.0cf3001           |
| [sparta-plugins](http://research.spa.aalto.fi/projects/sparta_vsts/)                                             | AALTO vst plugins for Spatial Audio Real-time Applications                                                     | 2022_06_20_v1.6.2      |
| [swh-lv2-git](http://plugin.org.uk/)                                                                             | Experimental port of Steve                                                                                     | 1.0.16.r51.1aa77e5     |
| [timemachine](https://github.com/swh/timemachine.git)                                                            | A JACK aplication that can retrospectively record audio.                                                       | v0.3.4.r6.g6053ab0     |
| [timeshift](https://github.com/linuxmint/timeshift)                                                              | A system restore utility for Linux                                                                             | 22.11.2                |
| [tonespace](https://www.mucoder.net/en/tonespace)                                                                | chord generator and visualizer                                                                                 | 2.9.20220308           |
| [ttf-devicons](https://github.com/vorillaz/devicons)                                                             | An iconic font for developers                                                                                  | 1.8.0                  |
| [tuned](https://github.com/redhat-performance/tuned)                                                             | Daemon that performs monitoring and adaptive configuration of devices in the system                            | 2.20.0                 |
| [vital-synth](https://vital.audio)                                                                               | Spectral warping wavetable synth.                                                                              | 1.5.5                  |
| [vst2sdk](http://www.steinberg.net/en/company/developers.html)                                                   | Steinberg's VST2 SDK                                                                                           | 3.6.10                 |
| [tap-plugins-lv2-git](https://github.com/moddevices/tap-lv2)                                                     | LV2 port for the TAP                                                                                           | r95.de26a3c            |

# setup

Clone this repository into $HOME/Workspace/syncopated/pkgrr

```bash
$ export pkgrr="$HOME/Workspace/syncopated/pkgrr"
$ git clone https://gitlab.com/syncopatedlinux/pkgrr.git $pkgrr
$ cd $pkgrr

```

Set variables in [vars/user.yml](vars/user.yml)

```yaml
---

user:
  name: b08x
  group: b08x
  uid: 1000
  gid: 1000
  home: /home/b08x
  secondary_groups: "input,video,audio,wheel"
  shell: /usr/bin/zsh
  email: rwpannick@gmail.com
  realname: Robert Pannick
  gpg: 36A6ECD355DB42B296C0CEE2157CA2FC56ECC96A

workspace: /home/b08x/Workspace

```


These variables are used in templates, [for example](templates/devtools/makepkg-x86_64.conf.j2#L117):


```yaml
#-- Destination: specify a fixed directory where all packages will be placed
PKGDEST={{ user.home }}/Packages/x86_64
#-- Source cache: specify a fixed directory where source files will be cached
SRCDEST={{ user.home }}/Packages/sources
#-- Source packages: specify a fixed directory where all src packages will be placed
SRCPKGDEST={{ user.home }}/Packages/x86_64/srcpackages
#-- Log files: specify a fixed directory where all log files will be placed
LOGDEST={{ user.home }}/Packages/x86_64/makepkglogs
#-- Packager: name/email of the person or organization building packages
PACKAGER="{{ user.realname }} <{{ user.email }}>"
#-- Specify a key to use for package signing
GPGKEY="{{ user.gpg }}"
```

You can get pretty creative with these.


You can also set variables in [pkgrr](pkgrr.yml) playbook.
Note that duplicate variables located in the [vars](vars/) directory will override those set in the builder playbook.
So if `buildroot:` is set to `/mnt/chroots/arch` in builder.yml and then set as `/tmp/chroots/arch` in vars/user.yml,
then the buildroot variable will be set as `/tmp/chroots/arch` as variables in the vars directory will take precedence.

Once you've sorted that, run the pkgrr playbook:

```bash
$ ansible-playbook -c local -i localhost, pkgrr.yml
```

If a sudo password is required, run with -K for ansible to prompt for a password

```bash
$ ansible-playbook -K -c local -i localhost, pkgrr.yml
BECOME password:
```

Once that finishes, check that `$pkgrr/devtools` is in the user path.
If it is not then export that or better yet, add it .profile

```bash
$ export pkgrr="${HOME}/Workspace/syncopated/pkgrr"
$ export PATH="$PATH:$pkgrr/devtools"
```

# build

```bash
$ build.sh
```

```bash
$ build.sh all
```

```bash
$ build.sh all debug
```

```bash
$ build.sh package $pkgname
```

```bash
$ build.sh package $pkgname debug
```

Passing `debug` as an argument will leave the chroot mounted regardless if the build is sucessfull or not.

...
